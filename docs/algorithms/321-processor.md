# ABT-3.2.1-Processor: 사용자 요구에 따른 실행 알고리즘 v1.0

### 🔗 KWCAG 2.2 Reference
- **3.2.1 (사용자 요구에 따른 실행)**: 사용자가 의도하지 않은 기능(새 창, 초점에 의한 맥락 변화 등)은 실행되지 않아야 한다.

---

이 알고리즘은 **KWCAG 3.2.1(사용자 요구에 따른 실행)** 지침을 준수하며, 새 창, 팝업 띄우기, 폼 자동 전송, 초점 변화 등 사용자의 명시적인 입력이나 사전 경고 없이 문맥을 급격히 변경하는 요소가 있는지 진단한다.

## 1. 대상 식별 및 데이터 수집 (Data Collection)

### [대상 요소 추출]
- **새 창 이동 요소**: `a[target="_blank"]`, `form[target="_blank"]`
- **스크립트 기반 이벤트 트리거**: `onfocus`, `onchange`, `oninput` 속성이 바인딩된 요소 (`input`, `select` 등)
- **팝업/모달 발생 가능 요소**: `window.open` 스크립트를 포함하는 링크 또는 버튼

## 2. 분석 및 분류 로직 (Analysis Pipeline)

### [단계 A] 새 창 열림 사전 경고 분석 (Target Blank)
- `target="_blank"` 속성을 사용하는 링크나 폼에 새 창 열림을 안내하는 텍스트나 기호가 포함되어 있는가?
  - `title="새 창"`, `title="새 창 열림"` 등의 속성 포함 여부.
  - 시각적으로 숨겨진 텍스트(예: `<span class="sr-only">새 창</span>`) 포함 여부.
  - `aria-label="새 창"` 등의 ARIA 네임 제공 여부.
- 결과: 사전 안내 없이 새 창이 열리도록 설정되어 있으면 **[수정 권고]**.

### [단계 B] 입력 폼 컨트롤의 맥락 변화 분석 (OnFocus / OnChange)
- 사용자가 데이터를 입력(`oninput`, `onchange`)하거나 초점을 맞출 때(`onfocus`), 의도치 않은 자동 전송(Submit)이나 페이지 이동이 발생하는가?
  - 예: `<select onchange="this.form.submit()">` 
- 결과: 폼 컨트롤 요소가 입력 즉시 컨텍스트를 강제로 변경하도록 설정된 경우 **[부적절]**. (단, 이 부분은 사용자의 명시적 동의 버튼(예: '이동', '확인' 등) 제공을 권장함.)

### [단계 C] 스크립트 기반 강제 이동 검토 (정성 평가)
- 정적 분석으로 완벽히 탐지하기 어려운 `window.open` 이나 비동기 데이터 처리에 의한 강제 포커스 이동 등은 이벤트 리스너를 파싱하여 탐지한다.
- 결과: 의심스러운 패턴이 발견될 시 전문가의 동작 검증을 위한 **[검토 필요]** 상태로 플래그.

## 3. 최종 상태 정의 (Final Status)
1. **부적절 (Warning):**
   - `<select>` 등에서 `onchange` 이벤트 발생 시 폼이 자동 제출되거나 페이지가 강제 이동함.
2. **검토 필요 (Review):**
   - 스크립트로 동작하는 새 창 띄우기 등 맥락 변화의 사전 경고 여부를 기계적으로 판별하기 어려움.
3. **수정 권고 (Suggestion):**
   - `target="_blank"` 속성 링크에 '새 창'임을 알리는 명시적 텍스트/title 속성 등이 누락됨.
4. **적절 (Pass):**
   - 새 창 열림에 대한 사전 경고가 적절하게 제공되며, 폼 컨트롤이 사용자의 의사에 반해 자동 실행되지 않음.
