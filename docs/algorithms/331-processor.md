# ABT-3.3.1-Processor: 오류 정정 v0.10

### 🔗 References
- KWCAG 2.2: 3.3.1 오류 정정
- WCAG 2.2: 3.3.1 Error Identification (A) (Reference)

---

이 알고리즘은 **KWCAG 3.3.1(오류 정정)** 지침을 준수하며, 사용자가 입력 서식(Form)을 작성하는 과정에서 오류가 발생했을 때, 그 원인을 명확히 안내하고 정정할 수 있는 수단을 제공하는지 진단한다. 

> 💡 **전문가 수동 검사 유도 및 가이드 전략 (ABT 엔진 제약)**
> 브라우저 확장 프로그램은 데이터 전송을 유발할 수 있는 실제 폼(Form)의 Submit 버튼을 임의로 클릭할 수 없다. 또한 페이지를 리로드하거나 오류를 발생시키는 복잡한 동적 상태를 스크립트로 완벽히 추적(Passive)하는 것은 한계가 있다.
> 따라서 본 도구는 **[정적 분석을 통해 폼 요소를 찾아내어 전문가에게 수동 검사를 강하게 유도]**하고, **[오류 판별 기준을 명확히 가이드]**하는 방식을 채택한다.

## 1. 대상 식별 및 데이터 수집 (Data Collection)

### [대상 요소 추출]
- **입력 서식 요소 식별**: 페이지 내의 `<form>`, `<input>`, `<select>`, `<textarea>`, `[role="textbox"]`, `[role="combobox"]` 등 데이터를 입력하는 요소와 제출(Submit) 버튼을 스캔하여 전문가에게 목록으로 제시.

## 2. 분석 및 분류 로직 (Analysis Pipeline)

### [단계 A] 폼(Form) 스캔 및 수동 검사 환경 제공 (자동화 도구의 역할)
- **분석 로직**: 
  - 페이지 내의 입력 폼들을 하이라이트하고 목록화한다.
  - HTML5 네이티브 제약 조건(`required`, `pattern`) 및 `aria-invalid` 등의 속성 존재 여부만 기초적으로 파악하여 참고 데이터로 제공한다.
- **결과**: 입력 서식이 발견되면 자동 검사로는 판별을 멈추고, 즉시 **[검토 필요]** 상태로 플래그를 전환하여 전문가의 개입을 요청한다.

### [단계 B] 전문가 수동 검사 가이드라인 (인적 평가의 역할)
도구는 전문가에게 다음과 같은 4가지 구체적인 체크리스트를 팝업 또는 UI 가이드로 제공하여, 전문가가 직접 폼을 비정상적으로 제출해보고 결과를 기록하도록 유도한다.

1. **오류 원인 및 내용의 명확한 안내 (오류 유형 1, 2 검증)**
   - *체크리스트*: 고의로 필수값을 비우거나 잘못된 형식(이메일 등)을 입력하고 전송했을 때, 오류 원인과 정정 방법이 텍스트(알림창, 화면 내 에러 메시지)로 명확히 표시되는가?
   - 판정 기준: 텍스트 안내가 없거나, 단순히 빨간색 테두리만 그려진다면 **[부적절]**.

2. **오류 발생 시 초점(Focus) 이동 (오류 유형 3 검증)**
   - *체크리스트*: 폼 전송 에러 메시지를 확인(또는 경고창 닫기)한 직후, 키보드 초점이 에러가 발생한 해당 입력 서식으로 즉시 이동하는가?
   - 판정 기준: 초점이 에러 입력란으로 가지 않고 페이지 최상단으로 튕기거나 제자리에 머문다면 **[부적절]**.

3. **입력 데이터 유지 여부 (오류 유형 4 검증)**
   - *체크리스트*: 오류가 발생하여 에러 메시지가 뜬 화면에서, 사용자가 앞서 정상적으로 입력했던 다른 데이터들(이름, 연락처 등)이 사라지지 않고 그대로 보존되어 있는가?
   - 판정 기준: 전송 실패 후 화면이 새로고침 되면서 기존 입력값들이 전부 초기화된다면 **[부적절]**.

### [단계 C] 외부 시스템 검증 예외 (예외 사항 처리)
- 은행 뱅킹의 계좌 확인, 인증서 검증, 결제망 승인 등 "이미 전송된 값에 대해 외부 시스템으로부터 처리 가능 여부를 검증받는 경우"는 본 지침의 오류 정정 대상에서 제외한다.
- 단, 클라이언트 단에서 1차적으로 검증 가능한 "값의 누락, 형식(이메일 패턴 등), 범위의 유효성" 오류는 반드시 정정 방법을 제공해야 한다.
- 판정 기준: 외부 서버 응답에 의존하는 금융 결제 오류 등은 **[해당 없음(예외)]** 처리.

## 3. 최종 상태 정의 (Final Status)
1. **오류 (Fail):**
   - 현재 화면에 `aria-invalid="true"`가 적용된 상태임에도 `aria-errormessage`나 `aria-describedby`로 텍스트가 연결되지 않은 명백한 속성 누락 시.
   - 전문가 수동 검사 결과, 오류 원인이 텍스트로 안내되지 않거나 초점 이동이 실패한 경우.
2. **검토 필요 (Needs Review):**
   - 페이지 내 폼(form)이나 필수 입력 컨트롤이 감지되었음. 시스템이 고의로 폼을 제출하여 에러를 유발할 수 없으므로, 진단자가 직접 폼에 오기입 후 제출을 시도해봐야 함을 안내.
3. **N/A:**
   - 사용자가 데이터를 입력/전송하는 컨트롤이 아예 존재하지 않음.
