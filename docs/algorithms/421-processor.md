# ABT-4.2.1-Processor: 웹 애플리케이션 접근성 준수 v0.10

### 🔗 References
- KWCAG 2.2: 4.2.1 웹 애플리케이션 접근성 준수
- WCAG 2.2: 4.1.2 Name, Role, Value (A) (Reference)

---

이 알고리즘은 **KWCAG 4.2.1(웹 애플리케이션 접근성 준수)** 지침을 준수하며, 웹 애플리케이션(Single Page Application, Rich Internet Application 등)이 표준 웹 접근성 지침을 자체적으로 준수하는지, 또는 접근 가능한 대체 수단을 제공하는지 진단한다. 이 지침은 광범위한 평가를 요구하므로, ABT 엔진은 잠재적 웹 애플리케이션 요소를 탐지하고 전문가의 종합적인 판단을 유도하는 가이드 역할을 수행한다.

## 1. 대상 식별 및 데이터 수집 (Data Collection)

### [대상 요소 추출]
- **웹 애플리케이션 유형 탐지**:
  - `document.body`에 `role="application"` 속성이 있는가?
  - `history.pushState` 또는 `history.replaceState`와 같은 History API 사용 여부 (SPA).
  - 대량의 JavaScript 파일 로드 및 동적 DOM 조작 패턴 (React, Vue, Angular 등 프레임워크 사용 흔적).
  - ARIA `role` 속성이 광범위하게 사용된 요소 (복합 위젯).

### [접근성 메타데이터 수집]
- `aria-live`, `aria-atomic`, `aria-relevant` 등 동적 콘텐츠 업데이트 관련 ARIA 속성 사용 패턴.
- `role="alert"`, `role="status"`, `role="log"` 등 상태 메시지 제공 역할.

## 2. 분석 및 분류 로직 (Analysis Pipeline)

### [단계 A] 웹 애플리케이션 특징 탐지
- **Rule 1.1:** History API 사용 또는 `role="application"` 등 웹 애플리케이션 특징이 감지되는가?
  - 결과: 감지 시 **[검토 필요]** 상태로 전환.

### [단계 B] 동적 콘텐츠 접근성 보조 수단 탐지 (정적/패시브)
- **Rule 2.1:** 동적 업데이트되는 영역(예: `div` 또는 `span`)에 `aria-live` 속성이 올바르게 사용되었는가?
  - 결과: `aria-live`가 없거나, `off`로 설정된 동적 콘텐츠가 탐지되면 **[검토 필요]**로 플래그한다.
  - **전문가 가이드**: 해당 영역이 실제로 동적으로 업데이트되는 중요한 콘텐츠(예: 실시간 알림, 검색 결과, 채팅 메시지)를 포함하는지 확인하십시오. 만약 그렇다면, `aria-live="polite"` 또는 `aria-live="assertive"` 속성을 적용하여 보조기술 사용자에게 적절히 안내되는지 확인해야 합니다.
  - **예외**: 캐러셀(carousel)과 같이 초기에는 `aria-live="off"` 상태였다가 사용자가 포커스(`focus`)하거나 마우스(`mouseover`)로 진입할 때 동적으로 `aria-live="polite"` 등으로 변경되는 패턴은 예외로 인정될 수 있다. 이 경우에도 전문가에게 해당 동적 동작을 확인하도록 가이드한다.
- **Rule 2.2:** 상태 변경이나 경고 메시지 전달을 위해 `role="alert"` 또는 `role="status"`가 사용되었는가?
  - 결과: 사용되지 않으면 **[수정 권고]**.

### [단계 C] 전문가 종합 판단 가이드라인
ABT 엔진은 웹 애플리케이션 특성을 가진 페이지를 탐지하고, 전문가에게 다음 체크리스트를 제공하여 종합적인 접근성 준수 여부를 판단하도록 유도한다.
- *체크리스트*:
  - **자체 접근성 확인**:
    - 키보드만으로 모든 기능 조작이 가능한가? (6.1.1, 6.1.2 등 재확인)
    - ARIA 랜드마크, 역할, 상태, 속성이 의미론적으로 올바르게 사용되었는가?
    - 동적 콘텐츠 업데이트 시 보조기술 사용자에게 적절히 알림이 제공되는가?
    - 페이지 상태 변경(SPA 라우팅) 시 `<title>` 등 정보가 업데이트 되는가?
  - **대체 콘텐츠 제공 확인**:
    - 웹 애플리케이션이 자체적으로 접근성을 갖추기 어렵다면, 동일한 정보를 제공하는 대체 콘텐츠(예: 일반 HTML 버전)가 제공되는가? (예: 모바일 앱과 웹 앱이 별도로 존재)

## 3. 최종 상태 정의 (Final Status)
1. **오류 (Error):** (자동 판정 어려움) 웹 애플리케이션의 본질적 접근성 오류는 자동화 도구로 판단하기 매우 어려움.
2. **부적절 (Warning):**
   - 웹 애플리케이션으로 추정되는 페이지에서 동적 콘텐츠 업데이트 시 `aria-live` 속성 등 보조기술에 정보를 전달하는 메커니즘이 전혀 없는 경우.
   - 전문가가 수동 검사한 결과, 웹 애플리케이션의 핵심 기능이 보조기술로 조작 불가능하거나 정보 인지가 불가능한 경우.
3. **검토 필요 (Review) [Default State for detection]:**
   - ABT 엔진이 웹 애플리케이션 특성을 탐지했으며, 자체 접근성 및 대체 콘텐츠 제공 여부에 대한 전문가의 종합적인 판단이 필요한 상태.
4. **적절 (Pass):**
   - 전문가가 수동 검사한 결과, 웹 애플리케이션이 자체 접근성을 확보했거나, 접근 가능한 대체 콘텐츠를 명확히 제공하고 있음이 확인된 경우.
5. **N/A:**
   - 현재 페이지가 웹 애플리케이션의 특성을 가지고 있지 않음.
