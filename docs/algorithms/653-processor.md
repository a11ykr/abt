# ABT-6.5.3-Processor: 레이블과 네임 알고리즘 v1.0

### 🔗 KWCAG 6.5.3 Reference
- **2.5.3 (레이블과 네임)**: 텍스트 또는 텍스트 이미지가 포함된 레이블이 있는 사용자 인터페이스 구성요소는 네임(name)에 시각적으로 표시되는 해당 텍스트를 포함해야 한다.

---

이 알고리즘은 사용자가 눈으로 보는 **레이블(Visible Label)**과 스크린 리더 등 보조공학기기가 인식하는 **네임(Accessible Name)** 간의 일치성을 진단하여, 음성 명령 사용자 등이 시각적 텍스트를 바탕으로 원활하게 조작할 수 있도록 한다.

## 1. 대상 식별 및 데이터 수집 (Data Collection)

### [대상 요소 추출 (Target Elements)]
- `input`, `textarea`, `select`, `button` 요소.
- `a[href]` 링크 요소.
- 역할이 지정된 요소: `[role="button"]`, `[role="link"]`, `[role="menuitem"]`, `[role="menuitemcheckbox"]`, `[role="menuitemradio"]`, `[role="option"]`, `[role="radio"]`, `[role="switch"]`, `[role="tab"]`, `[role="treeitem"]`.
- **제외 (Exceptions)**: 
  - 시각적으로 보이는 텍스트 레이블이 없는 요소는 본 진단에서 제외(N/A 처리).
  - `type="hidden"` 혹은 `aria-hidden="true"` 등 화면에서 완전히 숨겨진 요소.

### [레이블(Label) 추출]
- 통상적인 위치 규칙을 적용하여 시각적 레이블을 식별:
  - **왼쪽**: 콤보 상자, 드롭다운 목록, 텍스트 입력 위젯.
  - **오른쪽**: 체크박스, 라디오 버튼.
  - **내부**: 버튼, 탭.
  - **아래**: 버튼 역할을 하는 아이콘 하단 텍스트.
- **심볼(Symbol) 처리**: 'b', 'I', 'ABC' 등 기호를 상징하는 문자는 시각적 레이블로 간주하지 않음.
- **수학 및 공식**: 시각적 레이블로 간주하며, 기호를 포함한 전체 표현식을 추출.

### [네임(Name) 계산]
- AccName 1.2 명세에 따라 최종 계산된 이름(`Accessible Name`)을 산출:
  - `aria-labelledby` > `aria-label` > 내부 텍스트/Label 연동 > `title`

## 2. 분석 및 분류 로직 (Analysis Pipeline)

### [단계 A] 레이블-네임 포함 관계 분석
- **Rule 1.1 (텍스트 포함):** 네임이 시각적 레이블 문자열을 포함하는가?
  - **대소문자 및 구두점**: 선택 사항으로 간주하여 무시(Ignore case/punctuation).
  - 결과: 불포함 시 **[부적절]**. (예: 레이블 "저장", 네임 "제출")
- **Rule 1.2 (수식 일치):** 수식 및 공식의 경우 레이블의 수학적 기호가 네임에 그대로 포함되어 있는가?
  - 결과: 기호 왜곡이나 누락 시 **[부적절]**.

### [단계 B] 심볼 및 기능 명시 검사
- **Rule 2.1 (심볼 기능성):** 'b', 'I' 등의 심볼은 레이블이 아니므로, 네임이 기호 자체가 아닌 **기능(예: 굵게, 기울임)**을 설명하는가?
  - 결과: 네임이 기능 대신 기호('b')로만 되어 있으면 **[수정 권고]**.

## 3. 최종 상태 정의 (Final Status)
1. **부적절 (Warning):**
   - 시각적 레이블이 네임에 포함되지 않은 경우.
   - 수식의 기호가 네임에서 적절히 표현되지 않은 경우.
2. **검토 필요 (Review):**
   - 레이블의 위치가 통상적이지 않아 자동 식별이 어려운 경우.
   - 복합적인 아이콘과 텍스트가 섞여 있어 레이블 범위 확정이 모호한 경우.
3. **수정 권고 (Suggestion):**
   - 심볼 문자를 네임으로 사용하여 기능 파악이 어려운 경우.
4. **적절 (Pass):**
   - 시각적 레이블이 네임에 포함되어 있으며, 수식 및 심볼 처리 원칙을 준수함.
5. **N/A:**
   - 시각적 레이블이 존재하지 않는 요소.
