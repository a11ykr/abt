# ABT-7.3.1-Processor: 오류 정정 알고리즘 v1.0

### 🔗 KWCAG 2.2 Reference
- **7.3.1 (오류 정정)**: 입력 오류를 정정할 수 있는 방법을 제공해야 한다.

---

이 알고리즘은 **KWCAG 7.3.1(오류 정정)** 지침을 준수하며, 사용자가 입력 서식(Form)을 작성하는 과정에서 오류가 발생했을 때, 그 원인을 명확히 안내하고 정정할 수 있는 수단을 제공하는지 진단한다. 

## 1. 대상 식별 및 데이터 수집 (Data Collection)

### [대상 요소 추출]
- **입력 서식 요소**: `<form>`, `<input>`, `<select>`, `<textarea>`, `[role="textbox"]` 등
- **오류 정보 제공 요소**: `aria-invalid="true"`, `aria-errormessage`, `aria-describedby`, `role="alert"`, `aria-live="assertive"`가 적용된 텍스트 컨테이너
- **이벤트 트리거**: 서식 제출(Submit) 버튼 및 유효성 검사(Validation) 관련 스크립트 이벤트 (`onsubmit`, `onblur` 등)

## 2. 분석 및 분류 로직 (Analysis Pipeline)

제공된 KWCAG 2.2의 4가지 주요 오류 유형과 예외 사항을 기반으로 분석을 수행한다.

### [단계 A] 오류 원인 및 내용의 명확한 안내 (오류 유형 1, 2)
- **분석 로직**: 입력 서식 제출 시 또는 필드 이탈 시(blur), 입력 오류가 발생했을 때 오류 내용을 텍스트로 안내하는가?
  - `aria-invalid="true"`가 설정된 요소에 `aria-errormessage`나 `aria-describedby`가 연결되어 구체적인 오류 텍스트를 제공하는지 검사.
  - 화면에 `role="alert"` 등을 통해 오류 메시지가 동적으로 표시되는지 추적.
- **결과**: 오류가 발생했음에도 시각적/보조기기적으로 원인을 설명하는 텍스트가 없거나 불충분한 경우 **[부적절]**.

### [단계 B] 오류 발생 시 초점(Focus) 이동 검사 (오류 유형 3)
- **분석 로직**: 폼 유효성 검사 실패(Submit 막힘 또는 알림창 발생) 후, 브라우저의 초점(Focus)이 어떻게 이동하는가?
  - 정상: 사용자가 [확인]을 누르거나 오류 텍스트가 표시된 직후, 초점이 오류가 발생한 해당 `<input>` 서식으로 자동 이동(`element.focus()`)함.
- **결과**: 오류 메시지 확인 후에도 초점이 원래 위치에 머물거나 페이지 최상단으로 튕기는 등 해당 서식으로 이동하지 않으면 **[부적절]**.

### [단계 C] 입력 데이터 유지 여부 (오류 유형 4)
- **분석 로직**: 폼 제출에 실패하여 페이지가 새로고침되거나 에러를 뱉어낼 때, 사용자가 이전에 입력했던 정상적인 데이터들이 그대로 유지되는가?
- **결과**: 오류 발생 시 입력했던 폼의 모든 내용이 초기화되어 사라져버리면 **[부적절]**. (이 부분은 브라우저 확장 프로그램이 폼 데이터를 임시 기록해두었다가 리로드 후 대조하는 방식으로 탐지 가능).

### [단계 D] 외부 시스템 검증 예외 (예외 사항 처리)
- 은행 뱅킹의 계좌 확인, 인증서 검증, 결제망 승인 등 "이미 전송된 값에 대해 외부 시스템으로부터 처리 가능 여부를 검증받는 경우"는 본 지침의 오류 정정 대상에서 제외한다.
- 단, 클라이언트 단에서 검증 가능한 "값의 누락, 형식(이메일 패턴 등), 범위의 유효성" 오류는 반드시 정정 방법을 제공해야 한다.
- 결과: 외부 서버 응답에 의존하는 오류는 **[해당 없음(예외)]** 처리하고, 프론트엔드 유효성 검증 위주로 평가한다.

## 3. 최종 상태 정의 (Final Status)
1. **부적절 (Warning):**
   - 입력 오류 발생 시 원인/내용을 설명 텍스트로 알려주지 않는 경우.
   - 오류 정보 확인 시(또는 팝업 닫기 시) 해당 입력 서식으로 초점이 이동하지 않는 경우.
   - 입력 오류 발생 시 기존에 입력한 내용이 모두 초기화(리셋)되어 사라지는 경우.
2. **검토 필요 (Review):**
   - 폼 입력란과 제출 버튼이 감지되었으나, 오류 텍스트의 적절성(문맥적 의미)과 초점 이동이 스크립트 복잡도로 인해 100% 자동 추적이 불가능할 때 전문가의 시뮬레이션을 요청함.
3. **적절 (Pass):**
   - 입력 누락이나 형식 오류 발생 시 명확한 텍스트로 안내하고, 초점이 해당 필드로 이동하며, 입력한 데이터가 유지됨이 확인된 경우.
4. **N/A:**
   - 페이지 내에 사용자가 데이터를 전송하는 입력 서식(Form)이 존재하지 않음.
