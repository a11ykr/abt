@import './variables';

.container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
  background-color: $bg-p;
  color: $text;
  overflow: hidden;
  font-family: 'Pretendard', sans-serif;
  position: relative;
}

.extHeader {
  padding: 0.75rem 1rem;
  background-color: $bg-s;
  border-bottom: 1px solid $border;
  display: flex;
  justify-content: space-between;
  align-items: center;

  .brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    .logo { color: $accent; }
    h1 { font-size: 0.9rem; font-weight: 800; margin: 0; color: $text; }
    span { font-size: 10px; color: $text-d; font-weight: 600; }
  }

  .headerActions {
    display: flex;
    gap: 0.5rem;
  }
}

.iconBtn {
  background: transparent;
  border: none;
  color: $text-d;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  &:hover { color: $text; background: $bg-h; }
  &.success { color: $pass; }
}

.dashboard {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;

  .hero {
    .heroIcon { color: $accent; margin-bottom: 1rem; animation: float 3s infinite ease-in-out; }
    h2 { font-size: 1.25rem; font-weight: 800; margin-bottom: 0.5rem; color: $text; }
    p { font-size: 0.85rem; color: $text-m; margin-bottom: 1.5rem; }
  }

  .pagePreview {
    background: $bg-s;
    border: 1px solid $border;
    padding: 0.75rem;
    border-radius: 0.75rem;
    width: 100%;
    margin-bottom: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    .pageTitle { font-size: 12px; font-weight: 700; color: $text; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .pageUrl { font-size: 10px; color: $text-d; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  }

  .startBtn {
    background: $accent;
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 800;
    font-size: 0.9rem;
    cursor: pointer;
    box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.4);
    &:hover { filter: brightness(1.1); transform: translateY(-1px); }
  }
  .historyOption {
    margin-top: 2rem;
    padding: 1rem;
    background: $bg-s;
    border: 1px solid $border;
    border-radius: 0.75rem;
    p { font-size: 11px; line-height: 1.6; color: $text-m; margin-bottom: 1rem; }
    .optionBtns { display: flex; justify-content: center; gap: 0.5rem; }
  }

  .viewPrevBtn {
    background: transparent;
    color: $accent;
    border: 1px solid $accent;
    padding: 0.6rem 1.2rem;
    border-radius: 0.75rem;
    font-size: 0.85rem;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.2s;
    &:hover { background: rgba(59, 130, 246, 0.1); transform: translateY(-1px); }
  }

  .features {
    margin-top: 2rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    .featItem { font-size: 11px; color: $text-d; display: flex; align-items: center; gap: 0.3rem; }
  }
}

.workArea {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.statsSummary {
  display: flex;
  padding: 0.75rem 1rem;
  gap: 0.5rem;
  border-bottom: 1px solid $border;
  .statLine {
    font-size: 10px; font-weight: 800; color: $text-m; cursor: pointer;
    span { background: $bg-h; padding: 2px 6px; border-radius: 4px; margin-left: 3px; }
    &.fail span { color: $fail; background: rgba(248, 113, 113, 0.1); }
    &.review span { color: $review; background: rgba(96, 165, 250, 0.1); }
    &.pass span { color: $pass; background: rgba(74, 222, 128, 0.1); }
    &.active { color: $text; span { border: 1px solid $accent; } }
  }
}

.sessionSelector {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: $bg-s;
  border-bottom: 1px solid $border;
  color: $text-d;
  
  select {
    background: transparent;
    border: none;
    color: $text;
    font-size: 11px;
    font-weight: 700;
    cursor: pointer;
    outline: none;
    flex: 1;
    
    option {
      background: $bg-s;
      color: $text;
    }
  }
}

.groupedList {
  display: flex;
  flex-direction: column;
}

.groupSection {
  border-bottom: 1px solid $border;
}

.groupHeader {
  padding: 0.75rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  background: $bg-s;
  transition: background 0.2s;
  
  &:hover {
    background: $bg-h;
  }
  
  &.hasError {
    border-left: 3px solid $fail;
  }
  
  .headerLeft {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: $text-m;
    
    .gidLabel {
      font-size: 11px;
      font-weight: 700;
      color: $text;
    }
  }
  
  .countBadge {
    font-size: 10px;
    font-weight: 800;
    background: $bg-h;
    color: $text-m;
    padding: 2px 6px;
    border-radius: 4px;
  }
}

.naBadge {
  font-size: 10px;
  font-weight: 800;
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(148, 163, 184, 0.1);
  color: $text-d;
  border: 1px dashed $text-d;
  cursor: help;
}

.headerRight {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.scoreBadge {
  font-size: 10px;
  font-weight: 800;
  padding: 2px 6px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;

  &.good { background: rgba(34, 197, 94, 0.1); color: $pass; border: 1px solid transparent; }
  &.warning { background: rgba(234, 179, 8, 0.1); color: $warn; border: 1px solid transparent; }
  &.bad { background: rgba(239, 68, 68, 0.1); color: $fail; border: 1px solid transparent; }
  &.manual { background: rgba(59, 130, 246, 0.1); color: $review; border: 1px dashed $review; }

  &:hover {
    transform: translateY(-2px) scale(1.05);
    filter: brightness(1.2);
    box-shadow: 0 4px 12px $shadow;
    
    &.good { background: rgba(34, 197, 94, 0.25); border-color: $pass; }
    &.warning { background: rgba(234, 179, 8, 0.25); border-color: $warn; }
    &.bad { background: rgba(239, 68, 68, 0.25); border-color: $fail; }
    &.manual { background: rgba(59, 130, 246, 0.25); border-color: $review; border-style: solid; }
  }
}

.groupContent {
  padding: 0.75rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  background: $bg-p;
}

.miniCard {
  background: $bg-s;
  border: 1px solid $border;
  border-radius: 0.75rem;
  padding: 0.75rem;
  cursor: pointer;
  transition: all 0.2s;
  &:hover { border-color: $text-d; }
  &.selected { border-color: $accent; background: $selected; }

  .cardLayout {
    display: flex;
    gap: 0.75rem;
    align-items: flex-start;
  }

  .thumbBox {
    width: 42px;
    height: 42px;
    background: $bg-p;
    border-radius: 4px;
    border: 1px solid $border;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
    img { width: 100%; height: 100%; object-fit: contain; }
  }

  .cardMain {
    flex: 1;
    min-width: 0;
  }
  .cardTop {
    display: flex; justify-content: space-between; margin-bottom: 0.5rem;
  }
  h3 { font-size: 0.8rem; font-weight: 700; color: $text; margin: 0 0 0.4rem 0; line-height: 1.4; }
  .selector { font-size: 9px; color: $text-d; font-family: monospace; }
}

.markupSnippet {
  margin-top: 0.4rem;
  font-family: 'JetBrains Mono', monospace;
  font-size: 10px;
  background: $bg-p;
  padding: 4px 6px;
  border-radius: 4px;
  color: $accent;
  border-left: 2px solid $accent;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  filter: contrast(1.2);
  
  .attrName { color: #f472b6; font-weight: 700; }
  .attrVal { color: $pass; }
}

.smartContextView {
  margin-top: 0.5rem;
  font-size: 10px;
  line-height: 1.4;
  color: $text-m;
  background: $bg-s;
  padding: 6px;
  border-radius: 4px;
  border: 1px dashed $border;

  .highlight {
    color: $text;
    font-weight: 800;
    text-decoration: underline;
    text-decoration-color: $accent;
  }
}

.miniDetail {
  margin-top: 0.75rem;
  padding-top: 0.75rem;
  border-top: 1px solid $border;
  .ctx { font-size: 11px; color: $text-m; font-style: italic; margin-bottom: 0.75rem; }
  .miniActions { display: flex; gap: 0.5rem; button { font-size: 10px; font-weight: 800; padding: 3px 8px; border-radius: 4px; background: $bg-h; border: none; color: $text-m; cursor: pointer; &:hover { background: $border; color: $text; } } }
}

.miniJudge {
  margin-top: 0.75rem;
  textarea { width: 100%; background: $bg-p; border: 1px solid $border; border-radius: 4px; color: $text; font-size: 11px; padding: 0.5rem; min-height: 60px; }
  .judgeBtns { display: flex; justify-content: flex-end; gap: 0.4rem; margin-top: 0.4rem; button { font-size: 10px; font-weight: 800; padding: 4px 10px; border-radius: 4px; border: none; color: white; cursor: pointer; &.pBtn { background: #16a34a; } &.fBtn { background: #dc2626; } } }
}

.fullPropPanel {
  position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: $bg-p; z-index: 100; display: flex; flex-direction: column;
  header { padding: 1rem; border-bottom: 1px solid $border; display: flex; justify-content: space-between; align-items: center; h3 { font-size: 0.9rem; margin: 0; color: $text; } button { background: transparent; border: none; color: $text-d; cursor: pointer; } }
  .propBody { padding: 1.5rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1.5rem; section { h4 { font-size: 10px; font-weight: 800; color: $text-d; text-transform: uppercase; margin-bottom: 0.5rem; } code { background: $bg-s; padding: 0.5rem; border-radius: 4px; display: block; font-size: 11px; color: $accent; } p { font-size: 12px; line-height: 1.6; color: $text; } } }
  .histItem { margin-bottom: 1rem; padding: 0.5rem; background: $bg-s; border-radius: 4px; span { font-size: 9px; color: $text-d; } strong { display: block; font-size: 11px; color: $text-m; margin: 2px 0; } p { font-size: 11px; margin: 0; } }
}


@keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
